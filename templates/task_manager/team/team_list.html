{% extends "layouts/base.html" %}
{% block content %}
  <div>
    <h1>
      Teams:
    </h1>
    {% include "includes/search_form.html" %}
    {% for team in team_list %}
      <table class="table">
        <tr>
          <td>ID</td>
          <td>Name</td>
          <td></td>
          <td>task in progress</td>
          <td>Completed tasks</td>
          <td>Members</td>
        </tr>
        {% for team in team_list %}
          <tr>
            <td>{{ team.pk }}</td>
            <td><h3>{{ team.name }}</h3></td>
            <td>
              <a href="{% url 'task_manager:team_member_add' team.id %}" class="btn btn-lg btn-success ">Add member</a>
              <a href="{% url 'task_manager:team_task_add' team.id %}" class="btn btn-lg btn-success ">Add task</a>
            </td>
            <td>
              {% for task in team.task.all %}
                {% if task.is_completed == True %}
                  <a href="{% url 'task_manager:task_status_update' task.id %}?next=/task_manager/teams/">✅</a>
                {% else %}
                  <a href="{% url 'task_manager:task_status_update' task.id %}?next=/task_manager/teams/">🔄</a>
                {% endif %}
                <a href="{% url 'task_manager:task_detail' task.pk %}">{{ task }}</a>
                <a href="{% url 'task_manager:team_task_delete' team.pk task.id %}" class="m-2">❌</a><br>
              {% endfor %}
            </td>
            <td></td>
            <td class="text-white">
              {% for member in team.member.all %}
                <a href="{% url 'task_manager:worker_detail' member.pk %}">{{ member }}</a>
                <a href="{% url 'task_manager:team_member_delete' team.pk member.id %}" class="m-2">❌</a><br>
              {% endfor %}
            </td>
          </tr>
        {% endfor %}
      </table>
    {% endfor %}

  </div>
{% endblock %} 